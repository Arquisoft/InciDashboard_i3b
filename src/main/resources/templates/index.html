<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="dashboard proyect"/>
    <meta name="author" content="i1b"/>

    <title>Dashboard_i1b</title>
    
    
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

    <!-- MetisMenu CSS -->
    <link href="css/metisMenu.min.css" rel="stylesheet" type="text/css"/>

    <!-- Custom CSS -->
    <link href="css/startmin.css" rel="stylesheet" type="text/css"/>

    <!-- AwesomePics CSS -->
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    
    <!-- Table CSS -->
    <link href="css/tabla.css" rel="stylesheet" type="text/css"/>
    
    <script>
		var source = new EventSource("/raw");
		source.onmessage = function(event) {
			var table = document.getElementById("tableIncidences");
			var row = table.insertRow(1);
			var cell1 = row.insertCell(0);
			var cell2 = row.insertCell(1);
			var cell3 = row.insertCell(2);
			var cell4 = row.insertCell(3);
			var cell5 = row.insertCell(4);
			var cell6 = row.insertCell(5);
			var cell7 = row.insertCell(6);
			var obj = JSON.parse(event.data);
			cell1.innerHTML = obj.id;
			cell2.innerHTML = obj.name;
			cell3.innerHTML = obj.description;
			cell4.innerHTML = obj.username;
			cell5.innerHTML = obj.usertype;
			cell6.innerHTML = obj.state;
			var str = "Manage";
			var strref= "/manage/"+obj.id;
			var result = str.link(strref);
			cell7.innerHTML = result;
		}
	</script>
	
</head>


<body>
<!-- Page content -->
<div class="container-fluid">

	<div class="row">
		<div class="col-md-12" >
			<h1 class="page-header">Incidences</h1>
		</div>
	</div>
	
	<div class="row">
		<div class="col-md-12" >
			<table id="tableIncidences">
				<tr>
					<th>Incidence ID</th>
					<th>Incidence Name</th>
					<th>Incidence Description</th>
					<th>Agent</th>
					<th>Agent type</th>
					<th>State</th>
					<th></th>
				</tr>
			</table>
		</div>
	</div>
	
	
</div>
<!-- jQuery -->
<script src="js/jquery.min.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="js/bootstrap.min.js"></script>
<!-- Metis Menu Plugin JavaScript -->
<script src="js/metisMenu.min.js"></script>
</body>
</html>